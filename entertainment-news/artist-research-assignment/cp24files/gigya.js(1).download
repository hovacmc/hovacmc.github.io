$(document).ready(function(){getUserInfo();gigya.socialize.addEventHandlers({onLogin:getUserInfo,onLogout:getUserInfo});});function gigyaLogin(){gigya.accounts.showScreenSet({screenSet:loginWeb,mobileScreenSet:loginMobile,onAfterScreenLoad:modifyLogin()});}function gigyaProfile(){gigya.accounts.showScreenSet({screenSet:profWeb,mobileScreenSet:profMobile,onAfterScreenLoad:modifyLogin});}function gigyaRegister(){gigya.accounts.showScreenSet({screenSet:loginWeb,mobileScreenSet:loginMobile,startScreen:"gigya-register-screen",onAfterScreenLoad:modifyLogin()});}function getUserInfo(){gigya.socialize.getUserInfo({callback:displayUsername});}function checkUser(){gigya.socialize.getUserInfo({callback:displayLogScreen});}function gigyaLogout(){gigya.accounts.logout({callback:onLogout});function onLogout(response){if(response.errorCode!=0){alert("Error :"+response.errorMessage);}}}function displayLogScreen(response){if(response.errorCode==0){var user=response.user;if(user.isSiteUser){gigyaProfile();}else{gigyaLogin();}}else{alert("Error :"+response.errorMessage);}}function renderLinkedConnections(){var connect_params={showTermsLink:"false",showEditLink:"true",height:70,width:200,containerID:"gigya-connections",enabledProviders:shareProviders,requiredCapabilities:"login",hideGigyaLink:"true"};gigya.socialize.showAddConnectionsUI(connect_params);}function displayUsername(response){if(response.errorCode==0){var user=response.user;if(user.isSiteUser){var logoutsring='<a href="#" onclick="gigyaLogout();return false;">Sign Out</a>';var htmlstring='<a href="#" onclick="gigyaProfile();return false;">Profile</a>';$("#gigya_login").html(logoutsring+" "+htmlstring);}else{var logstring='<a href="#" onclick="gigyaLogin();return false;">Sign In</a>';var regstring='<a href="#" onclick="gigyaRegister();return false;">Register</a>';$("#gigya_login").html(logstring+" "+regstring);}}else{alert("Error :"+response.errorMessage);}}function modifyLogin(){renderLinkedConnections();}function createCommentWidgetInitParams(catID,comID,loginWeb,loginMobile,shareProviders){var param={categoryID:catID,streamID:comID,version:2,containerID:"commentsDiv",cid:"",scope:"internal",privacy:"public",enabledShareProviders:shareProviders,templates:{},deviceType:"auto",useSiteLogin:true,callback:function(response){if((response.status=="OK")&&(typeof response.commentCount!=="undefined")){$("span.comments").html(response.commentCount);}},onCommentSubmitted:function(response){var comCountParam=createMinGigyaParams(response.categoryID,response.streamID,"span.comments");gigya.comments.getComments(comCountParam);},onSiteLoginClicked:function(){gigya.accounts.showScreenSet({screenSet:loginWeb,mobileScreenSet:loginMobile,onAfterScreenLoad:modifyLogin()});}};return param;}function createMinGigyaParams(gigyaCategoryID,polopolyArticleID,commentCountSpanID){var countParam={categoryID:gigyaCategoryID,streamID:polopolyArticleID,threadLimit:1000,callback:function(response){if((response.status=="OK")&&(typeof response.commentCount!=="undefined")){$(commentCountSpanID).html(response.commentCount);}}};return countParam;}function onSendDone(event){if(event.providers){var providers=event.providers.split(",");for(i=0;i<providers.length;i++){var provider=providers[i];Tracking.trackSocial(providers+"btn_click");}}}function createArticleGigyaParams(articleTitle,articleURL,articleDescription,articleImage,mode,gigyaURLShort,shareBarDiv,staticDomain,gigyaCount){var ua=new gigya.socialize.UserAction();ua.setTitle(articleTitle);ua.setLinkBack(articleURL);ua.setDescription(articleDescription);ua.addMediaItem({type:"image",src:articleImage,href:articleURL});if("mobile"==mode){var showShareBarUI_params={containerID:shareBarDiv,shareButtons:[{provider:"Facebook",iconImgUp:staticDomain+"/bellmedia/common/img/share/facebook-icon.png"},{provider:"Twitter",iconImgUp:staticDomain+"/bellmedia/common/img/share/twitter-icon.png"},{provider:"Googleplus",iconImgUp:staticDomain+"/bellmedia/common/img/share/google-icon.png"},{provider:"Reddit",iconImgUp:staticDomain+"/bellmedia/common/img/share/reddit-icon.png"},{provider:"Share",iconImgUp:staticDomain+"/bellmedia/common/img/share/share-icon.png"}],iconsOnly:"true",userAction:ua,showCounts:gigyaCount,shortURLs:gigyaURLShort,onSendDone:onSendDone};}else{var showShareBarUI_params={containerID:shareBarDiv,shareButtons:[{provider:"Facebook",iconImgUp:staticDomain+"/bellmedia/common/img/share/facebook-icon.png"},{provider:"Twitter",iconImgUp:staticDomain+"/bellmedia/common/img/share/twitter-icon.png"},{provider:"Googleplus",iconImgUp:staticDomain+"/bellmedia/common/img/share/google-icon.png"},{provider:"Reddit",iconImgUp:staticDomain+"/bellmedia/common/img/share/reddit-icon.png"},{provider:"Share",iconImgUp:staticDomain+"/bellmedia/common/img/share/share-icon.png"},{provider:"Print",iconImgUp:staticDomain+"/bellmedia/common/img/share/print-icon.png"},{provider:"Email",iconImgUp:staticDomain+"/bellmedia/common/img/share/email-icon.png"}],iconsOnly:"true",userAction:ua,shortURLs:gigyaURLShort,showCounts:gigyaCount,onSendDone:onSendDone};}return showShareBarUI_params;}function createShortArticleGigyaParams(articleTitle,articleURL,articleDescription,articleImage,gigyaURLShort,staticDomain,gigyaCount){var ua=new gigya.socialize.UserAction();ua.setTitle(articleTitle);ua.setLinkBack(articleURL);ua.setDescription(articleDescription);ua.addMediaItem({type:"image",src:articleImage,href:articleURL});var showShareBarUI_params={containerID:"componentGalleryDiv",shareButtons:[{provider:"Facebook",iconImgUp:staticDomain+"/bellmedia/common/img/share/facebook-icon.png"},{provider:"Twitter",iconImgUp:staticDomain+"/bellmedia/common/img/share/twitter-icon.png"},{provider:"Googleplus",iconImgUp:staticDomain+"/bellmedia/common/img/share/google-icon.png"},{provider:"Reddit",iconImgUp:staticDomain+"/bellmedia/common/img/share/reddit-icon.png"},{provider:"Share",iconImgUp:staticDomain+"/bellmedia/common/img/share/share-icon.png"}],iconsOnly:"true",userAction:ua,shortURLs:gigyaURLShort,showCounts:gigyaCount,onSendDone:onSendDone};return showShareBarUI_params;}function createSpecialArticleGigyaParams(articleTitle,articleURL,articleDescription,articleImage,gigyaURLShort,staticDomain){var ua=new gigya.socialize.UserAction();ua.setTitle(articleTitle);ua.setLinkBack(articleURL);ua.setDescription(articleDescription);ua.addMediaItem({type:"image",src:articleImage,href:articleURL});var showShareBarUI_params={containerID:"componentArticleDiv",shareButtons:[{provider:"Facebook",iconImgUp:staticDomain+"/bellmedia/common/img/share/facebook-icon.png"},{provider:"Twitter",iconImgUp:staticDomain+"/bellmedia/common/img/share/twitter-icon.png"},{provider:"Googleplus",iconImgUp:staticDomain+"/bellmedia/common/img/share/google-icon.png"},{provider:"Reddit",iconImgUp:staticDomain+"/bellmedia/common/img/share/reddit-icon.png"}],iconsOnly:"false",userAction:ua,shortURLs:gigyaURLShort,showCounts:"none",layout:"vertical",onSendDone:onSendDone};return showShareBarUI_params;}function createVideoGigyaParams(clipTitle,clipURL,gigyaURLShort,staticDomain,gigyaCount){var ua=new gigya.socialize.UserAction();ua.setTitle(clipTitle);ua.setLinkBack(clipURL);ua.setDescription(clipTitle);ua.addMediaItem({type:"video",src:clipURL,href:clipURL});var showShareBarUI_params={containerID:"componentBottomDiv",shareButtons:[{provider:"Facebook",iconImgUp:staticDomain+"/bellmedia/common/img/share/facebook-icon.png"},{provider:"Twitter",iconImgUp:staticDomain+"/bellmedia/common/img/share/twitter-icon.png"},{provider:"Googleplus",iconImgUp:staticDomain+"/bellmedia/common/img/share/google-icon.png"},{provider:"Reddit",iconImgUp:staticDomain+"/bellmedia/common/img/share/reddit-icon.png"},{provider:"Share",iconImgUp:staticDomain+"/bellmedia/common/img/share/share-icon.png"}],iconsOnly:"true",userAction:ua,shortURLs:gigyaURLShort,showCounts:gigyaCount,onSendDone:onSendDone};return showShareBarUI_params;}function createElectionArticleGigyaParams(articleTitle,articleURL,articleDescription,articleImage,gigyaURLShort,staticDomain){var ua=new gigya.socialize.UserAction();ua.setTitle(articleTitle);ua.setLinkBack(articleURL);ua.setDescription(articleDescription);ua.addMediaItem({type:"image",src:articleImage,href:articleURL});var showShareBarUI_params={containerID:"electionPrint",shareButtons:[{provider:"Print",iconImgUp:staticDomain+"/bellmedia/common/img/share/print-icon.png"},{provider:"Email",iconImgUp:staticDomain+"/bellmedia/common/img/share/email-icon.png"}],iconsOnly:"true",userAction:ua,shortURLs:gigyaURLShort,showCounts:"none",onSendDone:onSendDone};return showShareBarUI_params;}function createElectionPrintArticleGigyaParams(articleTitle,articleURL,articleDescription,articleImage,gigyaURLShort,staticDomain){var ua=new gigya.socialize.UserAction();ua.setTitle(articleTitle);ua.setLinkBack(articleURL);ua.setDescription(articleDescription);ua.addMediaItem({type:"image",src:articleImage,href:articleURL});var showShareBarUI_params={containerID:"electionPrintBottom",shareButtons:[{provider:"Print",iconImgUp:staticDomain+"/bellmedia/common/img/share/print-icon.png"},{provider:"Email",iconImgUp:staticDomain+"/bellmedia/common/img/share/email-icon.png"}],iconsOnly:"true",userAction:ua,shortURLs:gigyaURLShort,showCounts:"none",onSendDone:onSendDone};return showShareBarUI_params;}function createElctionBottomGigyaParams(articleTitle,articleURL,articleDescription,articleImage,gigyaURLShort,staticDomain,gigyaCount){var ua=new gigya.socialize.UserAction();ua.setTitle(articleTitle);ua.setLinkBack(articleURL);ua.setDescription(articleDescription);ua.addMediaItem({type:"image",src:articleImage,href:articleURL});var showShareBarUI_params={containerID:"componentElectionDiv",shareButtons:[{provider:"Facebook",iconImgUp:staticDomain+"/bellmedia/common/img/share/facebook-icon.png"},{provider:"Twitter",iconImgUp:staticDomain+"/bellmedia/common/img/share/twitter-icon.png"},{provider:"Googleplus",iconImgUp:staticDomain+"/bellmedia/common/img/share/google-icon.png"},{provider:"Reddit",iconImgUp:staticDomain+"/bellmedia/common/img/share/reddit-icon.png"},{provider:"Share",iconImgUp:staticDomain+"/bellmedia/common/img/share/share-icon.png"}],iconsOnly:"true",userAction:ua,shortURLs:gigyaURLShort,showCounts:gigyaCount,onSendDone:onSendDone};return showShareBarUI_params;}